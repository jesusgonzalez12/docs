"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2914],{3905:function(e,r,t){t.d(r,{Zo:function(){return c},kt:function(){return d}});var n=t(67294);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function u(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=n.createContext({}),s=function(e){var r=n.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},c=function(e){var r=s(e.components);return n.createElement(l.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},k=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),k=s(t),d=a,y=k["".concat(l,".").concat(d)]||k[d]||p[d]||o;return t?n.createElement(y,i(i({ref:r},c),{},{components:t})):n.createElement(y,i({ref:r},c))}));function d(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=k;var u={};for(var l in r)hasOwnProperty.call(r,l)&&(u[l]=r[l]);u.originalType=e,u.mdxType="string"==typeof e?e:a,i[1]=u;for(var s=2;s<o;s++)i[s]=t[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},8345:function(e,r,t){t.r(r),t.d(r,{assets:function(){return c},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return u},metadata:function(){return s},toc:function(){return p}});var n=t(83117),a=t(80102),o=(t(67294),t(3905)),i=["components"],u={sidebar_position:30,title:"Query Workers"},l=void 0,s={unversionedId:"queryworkers/query-workers",id:"queryworkers/query-workers",title:"Query Workers",description:"After you build a query, you can save it as a query worker, similar to a SQL stored procedures. Query workers are cached across all GeoFabric locations. You can edit query workers while they are running, but an unsaved query must be redeployed if you need to update it.",source:"@site/docs/queryworkers/query-workers.md",sourceDirName:"queryworkers",slug:"/queryworkers/query-workers",permalink:"/docs/queryworkers/query-workers",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/master/docs/queryworkers/query-workers.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30,title:"Query Workers"},sidebar:"tutorialSidebar",previous:{title:"Running Queries",permalink:"/docs/queryworkers/running-queries"},next:{title:"API Endpoints",permalink:"/docs/queryworkers/api-endpoints"}},c={},p=[{value:"Create a New Query Worker",id:"create-a-new-query-worker",level:2},{value:"Saved Queries",id:"saved-queries",level:2},{value:"Copy a Query Worker",id:"copy-a-query-worker",level:3},{value:"Explain a Query Worker",id:"explain-a-query-worker",level:3},{value:"Run a Query Worker",id:"run-a-query-worker",level:3},{value:"Delete a Query Worker",id:"delete-a-query-worker",level:3},{value:"Edit a Query Worker",id:"edit-a-query-worker",level:2},{value:"Import Query Workers",id:"import-query-workers",level:2},{value:"Export Query Workers",id:"export-query-workers",level:2}],k={toc:p};function d(e){var r=e.components,u=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},k,u,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"After you build a query, you can save it as a ",(0,o.kt)("em",{parentName:"p"},"query worker"),", similar to a SQL stored procedures. Query workers are cached across all GeoFabric locations. You can edit query workers while they are running, but an unsaved query must be redeployed if you need to update it."),(0,o.kt)("p",null,"You can create and update query workers from the GUI, command line, or REST API. Each query worker is tied to a specific query text and parameter set. You can set optional or mandatory default values for query parameters."),(0,o.kt)("p",null,"Each query worker functions as an endpoint. Query workers exist on the GeoFabric level along with other data like collections and documents."),(0,o.kt)("h2",{id:"create-a-new-query-worker"},"Create a New Query Worker"),(0,o.kt)("p",null,"When you save a query, it becomes a query worker."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Write a ",(0,o.kt)("a",{parentName:"li",href:"../c8ql/"},"C8QL")," query."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Save Query"),"."),(0,o.kt)("li",{parentName:"ol"},"Enter a ",(0,o.kt)("strong",{parentName:"li"},"Name")," and then click ",(0,o.kt)("strong",{parentName:"li"},"Save"),".")),(0,o.kt)("h2",{id:"saved-queries"},"Saved Queries"),(0,o.kt)("p",null,"To view saved queries, click ",(0,o.kt)("strong",{parentName:"p"},"Saved Queries"),"."),(0,o.kt)("p",null,"Macrometa displays a list of default queries and user-defined queries. You cannot delete or overwrite default queries. In the following screenshot, the user selected a default query:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Saved queries",src:t(26381).Z,width:"2000",height:"754"})),(0,o.kt)("h3",{id:"copy-a-query-worker"},"Copy a Query Worker"),(0,o.kt)("p",null,"Click the stacked pages to copy any query worker and edit it in the Query Builder."),(0,o.kt)("h3",{id:"explain-a-query-worker"},"Explain a Query Worker"),(0,o.kt)("p",null,"Click the chat bubbles to display the ",(0,o.kt)("a",{parentName:"p",href:"/docs/queryworkers/running-queries#execution-plan"},"Execution Plan")," of the query worker without running the query."),(0,o.kt)("h3",{id:"run-a-query-worker"},"Run a Query Worker"),(0,o.kt)("p",null,"Click the play icon to run the query."),(0,o.kt)("h3",{id:"delete-a-query-worker"},"Delete a Query Worker"),(0,o.kt)("p",null,"Click the red minus sign to permanently delete the query worker."),(0,o.kt)("h2",{id:"edit-a-query-worker"},"Edit a Query Worker"),(0,o.kt)("p",null,"To edit a query worker:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In ",(0,o.kt)("strong",{parentName:"li"},"Queries"),", click ",(0,o.kt)("strong",{parentName:"li"},"Saved Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Double-click the query worker that you want to change. Macrometa opens it in the Editor tab."),(0,o.kt)("li",{parentName:"ol"},"Make any changes to the query and then click ",(0,o.kt)("strong",{parentName:"li"},"Update Query"),".")),(0,o.kt)("h2",{id:"import-query-workers"},"Import Query Workers"),(0,o.kt)("p",null,"To import custom queries from a saved file:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In Macrometa, navigate to ",(0,o.kt)("strong",{parentName:"li"},"Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Saved Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Import Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Select a file and then click ",(0,o.kt)("strong",{parentName:"li"},"Import"),".")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The file must be a JSON file matching the format on the screen, otherwise Macrometa cannot understand the query.")),(0,o.kt)("h2",{id:"export-query-workers"},"Export Query Workers"),(0,o.kt)("p",null,"To export custom queries and download them as a JSON file:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In Macrometa, navigate to ",(0,o.kt)("strong",{parentName:"li"},"Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Saved Queries"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Export Queries"),".")))}d.isMDXComponent=!0},26381:function(e,r,t){r.Z=t.p+"assets/images/saved-queries-926daaaecf5740d50eb7eb360d8e72ea.png"}}]);